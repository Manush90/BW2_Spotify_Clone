<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Media Player</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      /* Aggiungi eventuali personalizzazioni CSS qui */
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-4">
          <h4>Titolo</h4>
          <p id="songTitle">Nome della canzone</p>
          <h4>Artista</h4>
          <p id="artistName">Nome dell'artista</p>
        </div>
        <div class="col-md-4">
          <audio id="audioPlayer" controls>
            <source src="url_della_tua_canzone.mp3" type="audio/mpeg" />
            Il tuo browser non supporta l'elemento audio.
          </audio>
        </div>
        <div class="col-md-4">
          <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1" />
        </div>
      </div>
    </div>

    <script>
      const audioPlayer = document.getElementById("audioPlayer");
      const songTitle = document.getElementById("songTitle");
      const artistName = document.getElementById("artistName");
      const volumeControl = document.getElementById("volumeControl");

      // Imposta il titolo e l'artista della canzone
      songTitle.textContent = "Nome della canzone";
      artistName.textContent = "Nome dell'artista";

      // Ascolta l'evento per il cambiamento del volume
      volumeControl.addEventListener("input", () => {
        audioPlayer.volume = volumeControl.value;
      });

      // Funzione per avviare o mettere in pausa la riproduzione
      function togglePlayPause() {
        if (audioPlayer.paused) {
          audioPlayer.play();
        } else {
          audioPlayer.pause();
        }
      }

      // Ascolta l'evento click sul pulsante play/pausa
      audioPlayer.addEventListener("play", () => {
        // Aggiorna il testo del pulsante
        playPauseButton.textContent = "Pausa";
      });

      audioPlayer.addEventListener("pause", () => {
        // Aggiorna il testo del pulsante
        playPauseButton.textContent = "Play";
      });

      // Ascolta l'evento per il cambiamento del tempo di riproduzione
      audioPlayer.addEventListener("timeupdate", () => {
        // Aggiorna la barra di avanzamento della canzone
        progress.value = audioPlayer.currentTime / audioPlayer.duration;
      });

      // Funzione per cambiare la posizione della canzone
      function changeProgress() {
        audioPlayer.currentTime = audioPlayer.duration * progress.value;
      }

      // Ascolta l'evento per il cambiamento del volume
      volumeControl.addEventListener("input", () => {
        audioPlayer.volume = volumeControl.value;
      });

      // Ascolta l'evento per il cambiamento del volume
      volumeControl.addEventListener("input", () => {
        audioPlayer.volume = volumeControl.value;
      });

      // Imposta il volume predefinito
      volumeControl.value = audioPlayer.volume;

      const url = "https://deezerdevs-deezer.p.rapidapi.com/track/2194033397";
      const options = {
        method: "GET",
        headers: {
          "X-RapidAPI-Key": "8223206026mshc9f22398ae98821p146eb6jsna3d58f053010",
          "X-RapidAPI-Host": "deezerdevs-deezer.p.rapidapi.com",
        },
      };

      // Funzione per aggiornare i dettagli del brano nel player
      async function updatePlayerWithData() {
        try {
          const response = await fetch(url, options);
          const trackData = await response.json();

          // Aggiorna il titolo e l'artista della canzone nel player
          document.getElementById("songTitle").textContent = trackData.title;
          document.getElementById("artistName").textContent = trackData.artist.name;

          // Aggiorna l'URL del file audio nel player
          document.getElementById("audioPlayer").src = trackData.preview;
        } catch (error) {
          console.error(error);
        }
      }

      // Aggiorna i dati del player al caricamento della pagina
      window.onload = updatePlayerWithData;
    </script>
  </body>
</html>
